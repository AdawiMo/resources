---

copyright:

  years: 2018
lastupdated: "2018-07-20"

---

{:new_window: target="_blank"}  
{:shortdesc: .shortdesc}
{:tip: .tip}


# 将资源组织成资源组的最佳实践
{: #bp_resourcegroups}

资源组是一个用于对帐户[资源](/docs/resources/acct_resources.html#resource)进行组织的功能，目的是进行访问控制和计费。如果您对使用 Cloud Foundry 空间很熟悉，那么您可以将资源组织成资源组视为与将资源组织到空间中类似。资源是可以创建、管理并包含在资源组中的任何内容。用户不会添加到资源组。只能添加资源。 

目前，并非所有服务都支持使用 {{site.data.keyword.Bluemix_notm}} Identity and Access Management (IAM) 访问控制和分配到资源组的功能。IAM 管理的服务在您从目录创建新服务实例时，会提示您将这些实例分配给资源组。对资源组内资源及资源组本身的访问由 IAM 进行管理。通过使用 IAM 角色，可以为用户提供对资源组内组织的资源的访问权。IAM 角色还可以提供查看资源组、编辑资源组、向资源组添加新服务实例或管理资源组访问权的能力。

此外，在 Identity and Access UI 中分配对资源的访问权时，还可以找到 IAM 管理的服务的列表。转至**管理** &gt; **安全性** &gt; **身份和访问权**，选择任一用户或服务标识，然后从**操作**菜单中选择**分配访问权**。接着，选择**分配对资源的访问权**，在**服务**下拉菜单中，可以查看支持使用 IAM 的服务。对于尚不支持使用 IAM 的所有服务，您可以继续使用 Cloud Foundry 组织、空间和角色。 

Cloud Foundry 组织、空间和角色与资源组和 IAM 角色有很大不同。因此，Cloud Foundry 角色永远不能授予对资源组内资源的访问权。
{: tip}


## 设置资源组

缺省情况下，所有用户都会获得一个可以重命名的资源组。如果您具有计费帐户，那么可以创建多个资源组来组织资源。通过将资源组织成不同的资源组，您可以：

* 使用最少数量的策略更轻松地分配对一组资源的访问权 
* 按资源组查看使用情况信息以用于计费 

要创建新的资源组，请完成以下步骤：

1. 转至**管理** &gt; **帐户** &gt; **资源组**。
2. 单击**创建资源组**。
3. 输入资源组的名称。
4. 单击**添加**。


## 向资源组添加资源

使用 IAM 访问控制来管理的服务属于资源组，而不属于 Cloud Foundry 组织或空间。在目录中为其中一个服务创建服务实例时，系统会提示您将该实例分配给资源组。 

**重要信息**：创建实例时选择的资源组是最终选择，无法更改。

随着更多服务支持分配到资源组以及使用 IAM 访问控制，如果您的现有 Cloud Foundry 服务实例有资格进行迁移，那么会在仪表板上通知您。通过[将服务实例迁移到资源组](/docs/resources/instance_migration.html)，您将在所选资源组中创建新的链接实例，而 Cloud Foundry 实例会变成别名。 


## 分配对资源组及组内资源的访问权

您可通过创建访问策略，为组织成访问组的用户或用户组提供访问权。访问策略可设置目标（通常是服务实例或资源组中服务的所有实例）和角色（定义允许的访问类型）。您作为帐户所有者需要分配两种类型的访问策略，以向帐户中的用户提供相应访问权来使用资源组中的资源：

* 对资源组中资源的访问权。可以授予对组中所有资源的访问权，也可以仅授予对组中所选服务的访问权。
* 支持用户管理该组的访问权，这意味着用户可以查看该组，编辑该组的名称，管理其他人对该组进行管理的访问权，最重要的是能够创建新的服务实例并将其添加到组。

查看下表，以获取有关这两种类型访问权的更多信息以及每个分配的平台 IAM 角色为用户提供的能力：

|访问策略详细信息  |用于访问资源组的操作|对资源组中资源的操作| 
|:-----------------|:--------------|:---------------|
|访问权分配目标 |所选资源组 |资源组中所选的服务 |
|查看者角色 |查看组及其特征，但不能查看组中的资源|查看组中的资源| 
|操作员角色 |不适用 |不适用 | 
|编辑者角色 |查看或编辑组（而不是组中的资源）的名称或其他特征|创建、删除、编辑、暂挂、恢复、查看、绑定和管理资源组中资源的访问权|
|管理员角色 |查看、编辑或管理组（而不是组中的资源）的访问权|创建、删除、编辑、暂挂、恢复、查看、绑定和管理资源组中资源的访问权| 
{: caption="表 1. 对资源组的访问权" caption-side="top"}

如果希望用户能够创建新的服务实例并将其添加到资源组，用户必须分配有对资源组的“查看者”或更高角色，以及对服务的“编辑者”或更高角色。
{: tip}


## 样本访问策略

查看以下样本访问策略，以帮助您确定要如何分配对帐户中属于资源组的资源的访问权。

1. 通过一个策略，授予用户在整个帐户上对 {{site.data.keyword.Bluemix_notm}} Container Service 的平台角色“管理员”。具有这些详细信息的策略将允许用户访问此服务的所有实例，并允许用户在其至少具有“查看者”角色的任何资源组中创建服务实例。具有对任何资源的“管理员”角色的用户还可以授予其他用户对该资源的访问权。
2. 通过一个策略，授予用户对资源组（而不是其成员资源）的平台角色“查看者”。具有这些详细信息的策略将允许用户查看此资源组，在此资源组中创建任何服务的实例都需要此权限。
3. 通过一个策略，授予用户对资源组中所有资源的平台角色“编辑者”。具有对资源的“编辑者”角色的用户可以编辑或删除该资源。
4. 通过一个策略，授予用户对整个帐户（所有支持 IAM 的服务）的平台角色“管理员”。具有这些详细信息的策略允许用户对整个帐户中的任何资源执行任何平台操作，还包括对帐户执行管理操作的能力，例如管理帐户中的资源组。

## 用例示例

对于下面每一个用例，如果您希望自己的一组用户全部具有相同的访问级别，请将这些用户添加到[访问组](/docs/iam/groups.html#groups)。通过访问组，您可以使用最少数量的访问策略，因为访问组的所有成员都会继承分配给该组的任何访问权。
{: tip}

<ol>
<li><p>我有一个小型帐户，其中只有 10 个用户，所有用户共同处理一个项目。其中一些用户需要有能力管理帐户并为其他用户分配访问权。一些用户需要有能力供应会发生费用的服务实例。其他用户是应用程序开发者，只需要有能力通过自己的应用程序组件来使用服务实例即可。</p>
<p>所有这些用户都应该被授予对帐户和缺省资源组的各种角色 - 不需要创建更多资源组来分隔资源或限制某些用户访问某些资源。可以根据用户的需求，向用户授予对帐户和缺省资源组的相应角色 - 对于需要有能力管理帐户并授予其他人访问权的用户，授予对帐户的“管理员”角色；对于需要有能力供应服务实例的用户，授予对缺省资源组及其成员的“编辑者”角色；对于仅需要使用服务实例的用户，授予对资源组成员的“作者”或“读者”角色。</p>
</li>
<li><p>我有一个帐户，其中包含三个不同的团队，分别处理三个项目。有几个用户是管理员，需要有能力创建新资源组并为用户分配对资源组的访问权。其余用户只需要访问与其项目关联的资源组。</p>
<p>为此，我将在所有支持 IAM 的服务上为管理员分配“管理员”角色。为其余用户分配对与项目关联的资源组和资源组成员的各种角色 - 对于需要创建实例的用户，分配对资源组的“编辑者”角色；对于需要有能力使用实例的用户，分配对资源组成员的“读者”或“作者”角色。</p>
</li>
<li><p>我有一个帐户，其中包含多个资源组。我有一些用户在整个帐户中是服务 A 的管理员，需要访问该服务的所有实例以及有能力创建实例，但这些用户不需要访问帐户中的其他任何资源。</p>
<p>为此，我将在帐户级别为这些用户分配对服务 A 的“管理员”角色，并为他们分配对帐户中需要有能力在其中创建实例的所有资源组的“查看者”角色。</p>
</li>
<li><p>我的帐户中有一个用户，他仅需要对某个服务中特定资源的访问权，例如有能力在 IBM Cloud Object Storage 中写入存储区 A。此用户不应该有能力查看帐户中的资源组，或者访问此 Cloud Object Storage 实例中其他任何服务或其他任何存储区。</p> 
<p>我将为该用户授予对 Cloud Object Storage 的特定实例中存储区 A 的“作者”角色。您可以使用特定于服务的界面（本例中为 Cloud Object Storage UI）或主 Assign Access UI 授予此策略。建议使用特定于服务的 UI，因为此 UI 会允许您从资源列表中进行选择，而 Assign Access UI 不会显示低于服务实例级别的资源，您需要手动输入 CRN 才能将策略分配给这些资源。</p>
</li>
<li><p>今天我使用的是 Cloud Foundry 组织和空间，但我打算开始将资源组和访问组用于 IAM 管理的服务。目前，我的用户和资源已组织成用于业务线的组织，空间用于一个业务线内的不同项目。</p>
<p>我将使用资源组来像组织空间一样组织资源，即把每个资源组视为一个项目空间。然后，我将设置不同的访问组，以便授予用户对正确项目级别资源组的必要访问权。可以授予对资源组中所有资源的访问权，也可以仅授予对资源组内一组所选资源的访问权。因此，您可以为每个访问组设置对资源组内资源的各种不同级别的访问权，从而为每组用户提供使用资源或资源组本身所需的访问权。</p>
</li>
</ol>


